    [section codeM]

  JMP main
main:

.BB0:
  ENTER 2
.BB1:
  LDI32 R0, 0
  ST d R0, [BP, -8]
  LDI32 R0, -8
  ST d R0, [BP, -16]
  LD d R0, [BP, -16]
  NEG d R0
  ST d R0, [BP, -8]
  JMP .BB2

.BB2:
  LD d R0, [BP, -16]
  LD d R1, [BP, -8]
  CMP d R0, R1
  LE R0
  JZ .BB4
  JNZ .BB3

.BB3:
  LDI32 R0, 2
  LDI32 R1, 2
  CMP d R0, R1
  GREQ R0
  JZ .BB6
  JNZ .BB5

.BB4:
  LDI32 R0, 0x7B
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LDI32 R0, -123
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  CALL printNumber
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  CALL println
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  JMP .BB3

.BB5:
  LDI32 R0, 2
  LDI32 R1, 2
  CMP d R0, R1
  LEEQ R0
  JZ .BB8
  JNZ .BB7

.BB6:
  LDI32 R0, 0x32
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  JMP .BB5

.BB7:
  LDI32 R0, 3
  LDI32 R1, 2
  CMP d R0, R1
  NEQ R0
  JZ .BB10
  JNZ .BB9

.BB8:
  LDI32 R0, 0x33
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  JMP .BB7

.BB9:
  LDI32 R0, 3
  LDI32 R1, 3
  CMP d R0, R1
  EQ R0
  JZ .BB12
  JNZ .BB11

.BB10:
  LDI32 R0, 0x34
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  JMP .BB9

.BB11:
  LDI32 R0, 0
  MOV RT, R0
  JMP .BB13

.BB12:
  LDI32 R0, 0x35
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  JMP .BB11

.BB13:
  LEAVE 2
  HLT

printNumber:

.BB0:
  ENTER 3
.BB1:
  LD d R0, [BP, 16]
  ST d R0, [BP, -24]
  JMP .BB2

.BB2:
  LD d R0, [BP, -24]
  LDI32 R1, 0
  CMP d R0, R1
  LE R0
  JZ .BB4
  JNZ .BB3

.BB3:
  LD d R0, [BP, -24]
  LDI32 R1, 0
  CMP d R0, R1
  EQ R0
  JZ .BB6
  JNZ .BB7

.BB4:
  LDI32 R0, 0x2D
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LD d R0, [BP, -24]
  NEG d R0
  ST d R0, [BP, -24]
  JMP .BB3

.BB5:
  LDI32 R0, 0
  MOV RT, R0
  JMP .BB14

.BB6:
  LDI32 R0, 0x30
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  JMP .BB5

.BB7:
  LDI32 AR, printNumber_const1
  LDC64 R1, AR
  LDI32 R0, printNumber_const0
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R1
  PUSH R0
  POP R0
  POP R1
  ADD q ALR, R1
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LDI32 R0, 0
  ST d R0, [BP, -16]
  JMP .BB8

.BB8:
  LD d R0, [BP, -24]
  LDI32 R1, 0
  CMP d R0, R1
  GR R0
  JZ .BB10
  JNZ .BB9

.BB9:
  LD d R0, [BP, -16]
  LDI32 R1, 1
  SUB d R0, R1
  ST d R0, [BP, -16]
  JMP .BB11

.BB10:
  LD b R0, [BP, -8]
  LD d R1, [BP, -16]
  LDI32 BR2, 8
  MUL q R1, BR2
  ADD q R0, R1
  LD d R1, [BP, -24]
  LDI32 R2, 10
  MOD d R1, R2
  LDI32 R2, 48
  OR q R1, R2
  ST q R1, R0
  LD d R0, [BP, -16]
  LDI32 R1, 1
  ADD d R0, R1
  ST d R0, [BP, -16]
  LD d R0, [BP, -24]
  LDI32 R1, 10
  DIV d R0, R1
  ST d R0, [BP, -24]
  JMP .BB8

.BB11:
  LD d R0, [BP, -16]
  LDI32 R1, -1
  CMP d R0, R1
  NEQ R0
  JZ .BB13
  JNZ .BB12

.BB12:
  JMP .BB5

.BB13:
  LD b R0, [BP, -8]
  LD d R1, [BP, -16]
  LDI32 BR2, 8
  MUL q R1, BR2
  ADD q R0, R1
  LD q R0, R0
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LD d R0, [BP, -16]
  LDI32 R1, 1
  SUB d R0, R1
  ST d R0, [BP, -16]
  JMP .BB11

.BB14:
  LEAVE 3
  RET

println:

.BB0:
  ENTER 0
.BB1:
  LDI32 R0, 0x0A
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LDI32 R0, 0
  MOV RT, R0
  JMP .BB2

.BB2:
  LEAVE 0
  RET

strlength:

.BB0:
  ENTER 1
.BB1:
  LDI32 R0, 0
  ST d R0, [BP, -8]
  JMP .BB2

.BB2:
  LDI32 R0, 1
  LDI32 R1, 1
  CMP q R0, R1
  EQ R0
  JZ .BB4
  JNZ .BB3

.BB3:
  LD d R0, [BP, -8]
  MOV RT, R0
  JMP .BB8

.BB4:
  JMP .BB5

.BB5:
  LD q R0, [BP, 16]
  LD d R1, [BP, -8]
  LDI32 BR2, 8
  MUL q R1, BR2
  ADD q R0, R1
  LDC64 R0, R0
  LDI32 R1, 0x00
  CMP b R0, R1
  EQ R0
  JZ .BB7
  JNZ .BB6

.BB6:
  LD d R0, [BP, -8]
  LDI32 R1, 1
  ADD d R0, R1
  ST d R0, [BP, -8]
  JMP .BB2

.BB7:
  JMP .BB3

.BB8:
  LEAVE 1
  RET


    [section constantsM]


printNumber_const0:
  dq 0x62
  dq 0x75
  dq 0x66
  dq 0x66
  dq 0x65
  dq 0x72
  dq 0x00
printNumber_const1:
  dq 10
