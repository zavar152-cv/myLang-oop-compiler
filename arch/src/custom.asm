    [section codeM]

  JMP main
test:

.BB0:
  ENTER 1
.BB1:
  LD d R0, [BP, 16]
  LD d R1, [BP, 24]
  ADD d R0, R1
  LD d R1, [BP, 32]
  ADD d R0, R1
  LD d R1, [BP, 40]
  ADD d R0, R1
  ST d R0, [BP, -8]
  LD d R0, [BP, -8]
  MOV RT, R0
  JMP .BB2

.BB2:
  LEAVE 1
  RET

main:

.BB0:
  ENTER 7
.BB1:
  LDI32 R0, const1
  ST q R0, [BP, -32]
  LD b R0, [BP, -32]
  LDI32 R1, 0
  LDI32 BR2, 8
  MUL q R1, BR2
  ADD q R0, R1
  LDC64 R0, R0
  ST b R0, [BP, -40]
  LDI32 R0, 0
  ST d R0, [BP, -48]
  LDI32 R0, 14
  ST d R0, [BP, -56]
  JMP .BB2

.BB2:
  LD d R0, [BP, -48]
  LD d R1, [BP, -56]
  NEQ R0, R1
  JZ .BB4
  JNZ .BB3

.BB3:
  LDI32 R0, 10
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LDI32 R6, 1
  LDI32 R5, 1
  LDI32 R4, 1
  LDI32 R3, 1
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R6
  PUSH R5
  PUSH R4
  PUSH R3
  CALL test
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LDI32 R2, 3
  LDI32 R1, 2
  LDI32 R0, 1
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH RT
  PUSH R2
  PUSH R1
  PUSH R0
  CALL test
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  ST d RT, [BP, -24]
  JMP .BB5

.BB4:
  LD b R0, [BP, -32]
  LD d R1, [BP, -48]
  LDI32 BR2, 8
  MUL q R1, BR2
  ADD q R0, R1
  LDC64 R0, R0
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LD d R0, [BP, -48]
  LDI32 R1, 1
  ADD d R0, R1
  ST d R0, [BP, -48]
  JMP .BB2

.BB5:
  LD d R0, [BP, -24]
  LDI32 R1, 10
  EQ R0, R1
  JZ .BB7
  JNZ .BB6

.BB6:
  LDI32 R0, 10
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  MOV RT, IN
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  ST b RT, [BP, -16]
  LD b R0, [BP, -16]
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LDI32 R0, 0
  MOV RT, R0
  JMP .BB11

.BB7:
  LDI32 R0, const0
  ST q R0, [BP, -8]
  LDI32 R0, 0
  ST d R0, [BP, -48]
  LDI32 R0, 4
  ST d R0, [BP, -56]
  JMP .BB8

.BB8:
  LD d R0, [BP, -48]
  LD d R1, [BP, -56]
  NEQ R0, R1
  JZ .BB10
  JNZ .BB9

.BB9:
  JMP .BB6

.BB10:
  LD b R0, [BP, -8]
  LD d R1, [BP, -48]
  LDI32 BR2, 8
  MUL q R1, BR2
  ADD q R0, R1
  LDC64 R0, R0
  MOV BR1, SP
  PUSH R0
  PUSH R1
  PUSH R2
  PUSH R3
  PUSH R4
  PUSH R5
  PUSH R6
  PUSH R7
  PUSH R0
  POP R0
  MOV OUT, R0
  POP R7
  POP R6
  POP R5
  POP R4
  POP R3
  POP R2
  POP R1
  POP R0
  LD d R0, [BP, -48]
  LDI32 R1, 1
  ADD d R0, R1
  ST d R0, [BP, -48]
  JMP .BB8

.BB11:
  LEAVE 7

  HLT

    [section constantsM]


const0:
  dq 0x59
  dq 0x45
  dq 0x53
  dq 0x00
const1:
  dq 0x48
  dq 0x65
  dq 0x6C
  dq 0x6C
  dq 0x6F
  dq 0x2C
  dq 0x20
  dq 0x57
  dq 0x6F
  dq 0x72
  dq 0x6C
  dq 0x64
  dq 0x21
  dq 0x00